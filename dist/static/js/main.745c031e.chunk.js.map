{"version":3,"sources":["pages/index/components/Layout/style.module.scss","pages/nginx/components/Layout/style.module.scss","../external \"os\"","../external \"child_process\"","../external \"path\"","pages/nginx/components/Log/style.module.scss","../external \"electron\"","utils/index.js","pages/index/components/Layout/Context.jsx","pages/index/components/Layout/Item.jsx","utils/getDefaultPath.js","pages/index/components/Layout/index.jsx","pages/index/index.jsx","pages/index/effects/index.js","pages/nginx/components/Helper/index.jsx","hooks/useWatch.js","pages/nginx/components/Log/index.jsx","pages/nginx/components/Layout/index.jsx","pages/nginx/index.jsx","pages/nginx/effects/index.js","App.jsx","config.js","index.jsx","../external \"fs\""],"names":["module","exports","require","osType","os","type","isWin","normalize","str","trim","replace","storage","length","localStorage","getItem","setItem","delay","time","Promise","res","setTimeout","preventMutilClick","cb","timer","clearTimeout","checkFileExist","url","msg","rej","fs","access","err","error","readFile","content","toString","cmd","code","childProcess","exec","checkProcessById","id","writeFile","file","text","Context","createContext","EXT_REGEXP","Item","name","label","ext","onSelect","input","onChange","onPropsFocus","onFocus","onBlur","onRemove","required","rest","form","useContext","selectedItem","ipcRenderer","removeListener","onClick","match","send","defaultPath","getFieldValue","properties","filters","extensions","substr","on","validator","rule","value","val","matchValue","endsWith","includes","resolve","reject","rules","unshift","message","gutter","span","noStyle","validateTrigger","placeholder","e","target","select","autoComplete","MinusCircleOutlined","className","CONF","PID","ACCESS","ERROR","NGINX","getDefaultPath","nginxPath","nginx","conf","path","join","pid","FormItem","FormList","List","nginxName","formItemLayout","labelCol","sm","wrapperCol","style","buttonItemLayout","defaultLogs","Layout","useConnect","loadings","data","dispatch","nuomiProps","useNuomi","useForm","formRef","useRef","voidFields","setValues","setFields","forEach","field","setFieldsValue","setVoidFields","fields","getFieldsValue","Object","keys","push","clearVoidFields","Provider","onFinish","values","payload","initialValues","ref","extra","map","key","add","remove","index","offset","colon","current","scrollTop","onAdd","width","PlusOutlined","buttonItem","htmlType","loading","$saveNginx","confirm","onOk","clearFields","logs","edit","router","back","effects","save","newData","filter","this","updateState","JSON","stringify","init","parse","render","to","onInit","store","menu","title","shell","openExternal","Helper","props","overlay","placement","QuestionCircleOutlined","useWatch","args","useEffect","watcherPromise","a","extname","watch","watcher","close","Log","useState","setData","clearLoading","setClearLoading","scroller","onClear","onOpen","openItem","loadFile","array","split","slice","size","log","started","logFiles","useMemo","concat","reload","editConf","open","dirname","showItemInFolder","spinning","$checkStart","wrapperClassName","spin","card","bordered","danger","$stop","StopOutlined","$start","PlayCircleOutlined","ghost","$reload","ReloadOutlined","location","FileTextOutlined","FolderOpenOutlined","$delete","DeleteOutlined","k","state","getCode","getState","checkExist","App","locale","zhCN","cache","nuomi","config","duration","maxCount","listener","destroy","window","addEventListener","ctrlKey","keyCode","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.745c031e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"style_form__3dz31\",\"buttonItem\":\"style_buttonItem__3_Pl0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spin\":\"style_spin__250sK\",\"card\":\"style_card__3C50E\"};","module.exports = require(\"os\");","module.exports = require(\"child_process\");","module.exports = require(\"path\");","// extracted by mini-css-extract-plugin\nmodule.exports = {\"log\":\"style_log__x9jBQ\"};","module.exports = require(\"electron\");","import os from 'os';\nimport fs from 'fs';\nimport childProcess from 'child_process';\nimport { shell } from 'electron';\nimport { message } from 'antd';\n\nconst osType = os.type();\n\nexport const isMac = osType === 'Darwin';\n\nexport const isLinux = osType === 'Linux';\n\nexport const isWin = osType === 'Windows_NT';\n\nexport const normalize = (str) => (str ? str.trim().replace(/\\\\/g, '/') : '');\n\nexport const storage = (...args) => {\n  if (!args.length) {\n    return;\n  }\n  if (args.length === 1) {\n    return localStorage.getItem(args[0]);\n  }\n  return localStorage.setItem(args[0], args[1]);\n};\n\nexport const delay = (time = 300) => {\n  return new Promise((res) => {\n    setTimeout(() => res(), time);\n  });\n};\n\nexport const preventMutilClick = (cb) => {\n  let timer = null;\n  return () => {\n    clearTimeout(timer);\n    timer = setTimeout(() => {\n      cb && cb();\n    }, 100);\n  };\n};\n\nexport const checkFileExist = (url, msg) => {\n  return new Promise((res, rej) => {\n    fs.access(url, (err) => {\n      if (!err) {\n        res();\n      } else {\n        rej(msg || '文件不存在');\n        msg && message.error(msg);\n      }\n    });\n  });\n};\n\nexport const readFile = (url) => {\n  return new Promise((res, rej) => {\n    fs.readFile(url, (err, content) => {\n      if (!err) {\n        res(content.toString());\n      } else {\n        rej();\n      }\n    });\n  });\n};\n\nexport const cmd = (code, msg) => {\n  return new Promise((res, rej) => {\n    childProcess.exec(code, (err) => {\n      if (!err) {\n        res();\n      } else {\n        rej(msg);\n        msg && message.error(msg);\n      }\n    });\n  });\n};\n\nexport const checkProcessById = (id) => {\n  let code = 'lsof -nP -i | grep';\n  if (isWin) {\n    code = 'tasklist|findstr';\n  }\n  return cmd(`${code} ${id}`);\n};\n\nexport const writeFile = (file, text = '') => {\n  return new Promise((res, rej) => {\n    fs.writeFile(file, text, (err) => {\n      if (!err) {\n        res();\n      } else {\n        rej();\n      }\n    });\n  });\n};\n\nexport const openFolder = (path) => {\n  shell.showItemInFolder(isWin ? path.replace(/\\//g, '\\\\') : path);\n};\n","import { createContext } from 'react';\n\nconst Context = createContext();\n\nexport default Context;\n","import React, { useContext } from 'react';\nimport { Form, Input, Button, Row, Col } from 'antd';\nimport { MinusCircleOutlined } from '@ant-design/icons';\nimport { ipcRenderer } from 'electron';\nimport { checkFileExist, preventMutilClick } from '../../../../utils';\nimport Context from './Context';\n\nconst EXT_REGEXP = /\\.\\w+$/;\n\nconst Item = ({\n  name,\n  label,\n  ext,\n  input,\n  onSelect,\n  onChange,\n  onFocus: onPropsFocus,\n  onBlur,\n  onRemove,\n  required = true,\n  ...rest\n}) => {\n  const form = useContext(Context);\n\n  const selectedItem = (...args) => {\n    if (args[1]) {\n      onSelect(name, args[1]);\n    }\n    ipcRenderer.removeListener('selectedItem', selectedItem);\n  };\n\n  const onFocus = (e) => {\n    onPropsFocus && onPropsFocus(e);\n    e.target.select();\n  };\n\n  const onClick = preventMutilClick(() => {\n    const match = ext.match(EXT_REGEXP);\n    ipcRenderer.send('open-directory-dialog', {\n      defaultPath: form.getFieldValue(name),\n      properties: ['openFile'],\n      filters: [\n        {\n          name: 'All Files',\n          extensions: [match ? match[0].substr(1) : '*'],\n        },\n      ],\n    });\n    ipcRenderer.on('selectedItem', selectedItem);\n  });\n\n  const validator = (rule, value) => {\n    if (value) {\n      const val = value.trim();\n      const match = ext.match(EXT_REGEXP);\n      const matchValue = value.match(EXT_REGEXP);\n      if (match) {\n        if (val.endsWith(match[0])) {\n          if (['nginx', 'conf'].includes()) {\n            return checkFileExist(val);\n          }\n          return Promise.resolve();\n        }\n        return Promise.reject(`文件格式错误，必须以${match[0]}结尾`);\n      }\n      if (matchValue) {\n        return Promise.reject(`文件格式错误，不允许以${matchValue[0]}结尾`);\n      }\n      return checkFileExist(val);\n    }\n\n    return Promise.resolve();\n  };\n\n  const rules = [\n    () => ({\n      validator,\n    }),\n  ];\n\n  if (required) {\n    rules.unshift({ required: true, message: `${label}路径不能为空` });\n  }\n\n  return (\n    <Form.Item {...rest} label={label}>\n      <Row gutter={8}>\n        <Col span={19}>\n          <Form.Item name={name} noStyle rules={rules} validateTrigger=\"onBlur\">\n            <Input\n              placeholder={`请输入或选择${label}路径`}\n              onChange={onChange}\n              onFocus={onFocus}\n              onBlur={onBlur}\n              autoComplete=\"off\"\n            />\n          </Form.Item>\n        </Col>\n        <Col span={5}>\n          <Button onClick={onClick}>选 择</Button>\n          {onRemove ? <MinusCircleOutlined onClick={onRemove} className=\"e-ml8\" /> : ''}\n        </Col>\n      </Row>\n    </Form.Item>\n  );\n};\n\nexport default Item;\n","import path from 'path';\nimport { isWin } from '.';\n\nconst CONF = './nginx.conf';\nconst PID = './nginx.pid';\nconst ACCESS = './access.log';\nconst ERROR = './error.log';\nconst NGINX = isWin ? '' : '/usr/local/bin/nginx';\n\nconst getDefaultPath = (nginxPath = NGINX) => {\n  const defaultPath = {};\n  if (nginxPath) {\n    defaultPath.nginx = nginxPath;\n    if (isWin) {\n      defaultPath.conf = path.join(nginxPath, '../conf', CONF);\n      defaultPath.pid = path.join(nginxPath, '../logs', PID);\n      defaultPath.access = path.join(nginxPath, '../logs', ACCESS);\n      defaultPath.error = path.join(nginxPath, '../logs', ERROR);\n    } else {\n      defaultPath.conf = path.join(nginxPath, '../../etc/nginx', CONF);\n      defaultPath.pid = path.join(nginxPath, '../../var/run', PID);\n      defaultPath.access = path.join(nginxPath, '../../var/log/nginx', ACCESS);\n      defaultPath.error = path.join(nginxPath, '../../var/log/nginx', ERROR);\n    }\n  }\n  return defaultPath;\n};\n\nexport default getDefaultPath;\n","import React, { useRef } from 'react';\nimport { useConnect, useNuomi, router } from 'nuomi';\nimport { Form, Button, Modal, Row, Col } from 'antd';\nimport { PlusOutlined } from '@ant-design/icons';\nimport Item from './Item';\nimport { isWin } from '../../../../utils';\nimport getDefaultPath from '../../../../utils/getDefaultPath';\nimport Context from './Context';\nimport style from './style.module.scss';\n\nconst FormItem = Form.Item;\nconst FormList = Form.List;\nconst nginxName = `nginx${isWin ? '.exe' : ''}`;\n\nconst formItemLayout = {\n  labelCol: {\n    sm: { span: 4 },\n  },\n  wrapperCol: {\n    sm: { span: 20 },\n  },\n  className: style.form,\n};\n\nconst buttonItemLayout = {\n  labelCol: {\n    sm: { span: 0 },\n  },\n  wrapperCol: {\n    sm: { span: 24 },\n  },\n};\n\nconst defaultLogs = [\n  {\n    name: 'access',\n    label: 'Access Log',\n  },\n  {\n    name: 'error',\n    label: 'Error Log',\n  },\n];\n\nconst Layout = () => {\n  const [{ loadings, ...data }, dispatch] = useConnect();\n  const { nuomiProps } = useNuomi();\n  const [form] = Form.useForm();\n  const formRef = useRef();\n  let voidFields = null;\n\n  const onFinish = (values) => {\n    dispatch({\n      type: '$saveNginx',\n      payload: values,\n    });\n  };\n\n  const onBack = () => {\n    router.back();\n  };\n\n  const onReset = () => {\n    Modal.confirm({\n      content: '确定要清空吗？',\n      onOk: () => {\n        const clearFields = {};\n        ['nginx', 'conf', 'pid', 'access', 'error'].forEach((value) => {\n          clearFields[value] = '';\n        });\n        form.setFieldsValue({\n          ...clearFields,\n          logs: [],\n        });\n      },\n    });\n  };\n\n  const setValues = (path) => {\n    if (voidFields) {\n      const setFields = {};\n      const defaultPath = getDefaultPath(path);\n      voidFields.forEach((field) => {\n        setFields[field] = defaultPath[field];\n      });\n      form.setFieldsValue(setFields);\n    }\n  };\n\n  const setVoidFields = () => {\n    const fields = form.getFieldsValue();\n    Object.keys(fields).forEach((value) => {\n      if (!['nginx', 'logs'].includes(value) && !fields[value]) {\n        if (!voidFields) {\n          voidFields = [];\n        }\n        voidFields.push(value);\n      }\n    });\n  };\n\n  const clearVoidFields = () => {\n    voidFields = null;\n  };\n\n  const onSelect = (name, path) => {\n    form.setFieldsValue({\n      [name]: path,\n    });\n    if (name === 'nginx') {\n      setVoidFields();\n      setValues(path);\n      clearVoidFields();\n    }\n  };\n\n  const onNginxChange = ({ target: { value } }) => {\n    setValues(value);\n  };\n\n  const onAdd = (add) => {\n    add();\n    setTimeout(() => {\n      formRef.current.scrollTop = 19920604;\n    }, 0);\n  };\n\n  return (\n    <Context.Provider value={form}>\n      <Form form={form} onFinish={onFinish} {...formItemLayout} initialValues={data}>\n        <div ref={formRef}>\n          <Item\n            extra={`选择${nginxName}后，其他项路径会被自动填充，如果错误请自行修改`}\n            name=\"nginx\"\n            label=\"Nginx\"\n            ext={isWin ? '.exe' : ''}\n            onSelect={onSelect}\n            onChange={onNginxChange}\n            onFocus={setVoidFields}\n            onBlur={clearVoidFields}\n          />\n          <Item name=\"conf\" label=\"Conf\" ext=\".conf\" onSelect={onSelect} />\n          <Item name=\"pid\" label=\"Pid\" ext=\".pid\" onSelect={onSelect} />\n          {defaultLogs.map(({ name, label }) => (\n            <Item\n              key={name}\n              name={name}\n              label={label}\n              ext=\".log\"\n              onSelect={onSelect}\n              required={false}\n            />\n          ))}\n          <FormList name=\"logs\">\n            {(fields, { add, remove }) => {\n              return (\n                <>\n                  {fields.map((field, index) => (\n                    <Item\n                      {...field}\n                      label={index === 0 ? 'Other Log' : ''}\n                      wrapperCol={index === 0 ? null : { sm: { offset: 4, span: 20 } }}\n                      ext=\".log\"\n                      onRemove={() => remove(field.name)}\n                      onSelect={onSelect}\n                      required={false}\n                    />\n                  ))}\n                  <FormItem label=\" \" colon={false} required={false} className=\"e-mb8\">\n                    <Row gutter={8}>\n                      <Col span={19}>\n                        <Button type=\"dashed\" onClick={() => onAdd(add)} style={{ width: '100%' }}>\n                          <PlusOutlined /> 新增日志项\n                        </Button>\n                      </Col>\n                    </Row>\n                  </FormItem>\n                </>\n              );\n            }}\n          </FormList>\n          <FormItem className={style.buttonItem} {...buttonItemLayout}>\n            <Button type=\"primary\" htmlType=\"submit\" loading={loadings.$saveNginx}>\n              进入应用\n            </Button>\n            <Button onClick={onReset} className=\"e-ml16\">\n              清 空\n            </Button>\n            {nuomiProps.data.edit && (\n              <Button onClick={onBack} className=\"e-ml16\">\n                返 回\n              </Button>\n            )}\n          </FormItem>\n        </div>\n      </Form>\n    </Context.Provider>\n  );\n};\n\nexport default Layout;\n","import React from 'react';\nimport { Redirect } from 'nuomi';\nimport Layout from './components/Layout';\nimport { storage } from '../../utils';\nimport effects from './effects';\n\nexport default {\n  data: {\n    // 是否是编辑状态\n    edit: false,\n  },\n  effects,\n  render() {\n    if (this.data.edit || !storage('nginx')) {\n      return <Layout />;\n    }\n    return <Redirect to=\"/nginx\" />;\n  },\n  onInit() {\n    this.store.dispatch({\n      type: 'init',\n    });\n  },\n};\n","import { router } from 'nuomi';\nimport { storage, normalize, delay } from '../../../utils';\nimport getDefaultPath from '../../../utils/getDefaultPath';\n\nexport default {\n  save(data) {\n    const newData = {};\n    Object.keys(data).forEach((key) => {\n      const value = data[key];\n      if (key !== 'logs') {\n        newData[key] = normalize(value);\n      } else if (value) {\n        newData[key] = value.map((path) => normalize(path)).filter((path) => path);\n      }\n    });\n    this.updateState(newData);\n    storage('nginx', JSON.stringify(newData));\n  },\n  async $saveNginx(data) {\n    this.save(data);\n    await delay();\n    router.replace('/nginx', true);\n  },\n  init() {\n    const nginx = storage('nginx');\n    this.updateState(nginx ? JSON.parse(nginx) : getDefaultPath());\n  },\n};\n","import React from 'react';\nimport { QuestionCircleOutlined } from '@ant-design/icons';\nimport { Menu, Dropdown } from 'antd';\nimport { shell } from 'electron';\n\nconst menus = [\n  {\n    url: 'https://github.com/yinjiazeng/NginxGUI/issues',\n    title: '常见问题',\n  },\n  {\n    url: 'https://github.com/yinjiazeng/NginxGUI/issues/new',\n    title: '建议反馈',\n  },\n  {\n    url: 'https://github.com/yinjiazeng/NginxGUI/blob/master/README.md',\n    title: '关于NginxGUI',\n  },\n];\n\nconst menu = (\n  <Menu>\n    {menus.map(({ url, title }) => (\n      <Menu.Item key={title}>\n        <a onClick={() => shell.openExternal(url)}>{title}</a>\n      </Menu.Item>\n    ))}\n  </Menu>\n);\n\nconst Helper = (props) => {\n  return (\n    <Dropdown overlay={menu} placement=\"bottomRight\">\n      <QuestionCircleOutlined {...props} />\n    </Dropdown>\n  );\n};\n\nexport default Helper;\n","import { useEffect } from 'react';\nimport fs from 'fs';\nimport path from 'path';\nimport { checkFileExist, writeFile, preventMutilClick } from '../utils';\n\nexport const useWatch = (cb, args) => {\n  useEffect(() => {\n    const watch = async () => {\n      const file = args[0];\n      if (!file) {\n        return null;\n      }\n      const ext = path.extname(file);\n      // 不存在先创建\n      if (ext === '.log') {\n        try {\n          await checkFileExist(file);\n        } catch (e) {\n          await writeFile(file, '');\n        }\n      }\n      try {\n        return fs.watch(file, preventMutilClick(cb));\n      } catch (e) {\n        //\n      }\n    };\n    const watcherPromise = watch();\n    return async () => {\n      const watcher = await watcherPromise;\n      watcher && watcher.close();\n    };\n  }, args);\n};\n","import React, { useState, useEffect, useRef } from 'react';\nimport { Button, Card } from 'antd';\nimport { shell } from 'electron';\nimport { useWatch } from '../../../../hooks';\nimport { readFile, checkFileExist, writeFile, preventMutilClick } from '../../../../utils';\nimport style from './style.module.scss';\n\nconst Log = ({ file }) => {\n  const [data, setData] = useState([]);\n  const [clearLoading, setClearLoading] = useState(false);\n  const scroller = useRef();\n\n  const onClear = preventMutilClick(async () => {\n    await checkFileExist(file, '日志文件不存在');\n    setClearLoading(true);\n    await writeFile(file, '');\n    setData([]);\n    setClearLoading(false);\n  });\n\n  const onOpen = preventMutilClick(async () => {\n    await checkFileExist(file, '日志文件不存在');\n    shell.openItem(file);\n  });\n\n  const loadFile = async () => {\n    const content = await readFile(file);\n    const array = content.split(/\\n/g).slice(-100);\n    setData(array.filter((text) => text.trim()));\n    if (scroller.current) {\n      scroller.current.scrollTop = 19920604;\n    }\n  };\n\n  useWatch(() => {\n    loadFile();\n  }, [file]);\n\n  useEffect(() => {\n    loadFile();\n  }, []);\n\n  return (\n    <Card\n      title={file}\n      extra={\n        <>\n          <Button size=\"small\" onClick={onOpen}>\n            全部日志\n          </Button>\n          <Button size=\"small\" className=\"e-ml8\" onClick={onClear} loading={clearLoading}>\n            清除日志\n          </Button>\n        </>\n      }\n      className={style.log}\n    >\n      <div ref={scroller}>\n        {data.map((text, key) => (\n          <p key={key}>{text}</p>\n        ))}\n      </div>\n    </Card>\n  );\n};\n\nexport default Log;\n","import React, { useMemo } from 'react';\nimport { Card, Spin, Button } from 'antd';\nimport { shell } from 'electron';\nimport path from 'path';\nimport {\n  StopOutlined,\n  FolderOpenOutlined,\n  FileTextOutlined,\n  DeleteOutlined,\n  ReloadOutlined,\n  PlayCircleOutlined,\n} from '@ant-design/icons';\nimport { useConnect, router } from 'nuomi';\nimport Helper from '../Helper';\nimport Log from '../Log';\nimport { useWatch } from '../../../../hooks';\nimport { checkFileExist, preventMutilClick, openFolder } from '../../../../utils';\nimport style from './style.module.scss';\n\nconst Layout = () => {\n  const [{ loadings, started, nginx, conf, error, access, logs }, dispatch] = useConnect();\n\n  const logFiles = useMemo(() => {\n    return [access, error].concat(logs || []);\n  }, [access, error, logs]);\n\n  const stop = () => {\n    dispatch({ type: '$stop' });\n  };\n\n  const start = () => {\n    dispatch({ type: '$start' });\n  };\n\n  const reload = () => {\n    dispatch({ type: '$reload' });\n  };\n\n  const remove = () => {\n    dispatch({ type: '$delete' });\n  };\n\n  const edit = () => {\n    router.location('/', { edit: true });\n  };\n\n  const editConf = preventMutilClick(async () => {\n    await checkFileExist(conf, 'conf文件不存在');\n    shell.openItem(conf);\n  });\n\n  const open = preventMutilClick(async () => {\n    await checkFileExist(path.dirname(nginx), '目录不存在');\n    openFolder(nginx);\n  });\n\n  useWatch(() => {\n    started && reload();\n  }, [conf, started]);\n\n  return (\n    <Spin spinning={loadings.$checkStart} wrapperClassName={style.spin}>\n      <Card\n        className={style.card}\n        bordered={false}\n        title={\n          <span>\n            {started ? (\n              <Button onClick={stop} danger loading={loadings.$stop}>\n                {!loadings.$stop && <StopOutlined />}\n                停止\n              </Button>\n            ) : (\n              <Button type=\"primary\" onClick={start} loading={loadings.$start}>\n                {!loadings.$start && <PlayCircleOutlined />}\n                启动\n              </Button>\n            )}\n            {started && (\n              <Button\n                className=\"e-ml8\"\n                onClick={reload}\n                type=\"primary\"\n                ghost\n                loading={loadings.$reload}\n              >\n                {!loadings.$reload && <ReloadOutlined />}\n                重启\n              </Button>\n            )}\n          </span>\n        }\n        extra={\n          <span>\n            <Button onClick={edit}>\n              <FileTextOutlined />\n              编辑路径\n            </Button>\n            <Button onClick={editConf} className=\"e-ml8\">\n              <FileTextOutlined />\n              编辑配置\n            </Button>\n            <Button onClick={open} className=\"e-ml8\">\n              <FolderOpenOutlined />\n              打开目录\n            </Button>\n            <Button onClick={remove} className=\"e-ml8\" type=\"danger\" loading={loadings.$delete}>\n              {!loadings.$delete && <DeleteOutlined />}\n              删除\n            </Button>\n            <Helper className=\"e-ml8\" />\n          </span>\n        }\n      >\n        {logFiles.map((log, k) => (\n          <Log file={log} key={`${log || ''}_${k}`} />\n        ))}\n      </Card>\n    </Spin>\n  );\n};\n\nexport default Layout;\n","import React from 'react';\nimport { Redirect } from 'nuomi';\nimport Layout from './components/Layout';\nimport effects from './effects';\nimport { storage } from '../../utils';\n\nexport default {\n  state: {\n    nginx: '',\n    conf: '',\n    pid: '',\n    access: '',\n    error: '',\n    logs: [],\n    // 是否启动\n    started: false,\n  },\n  effects,\n  render() {\n    return !storage('nginx') ? <Redirect to=\"/\" /> : <Layout />;\n  },\n  onInit() {\n    this.store.dispatch({\n      type: '$checkStart',\n    });\n  },\n};\n","import { router } from 'nuomi';\nimport path from 'path';\nimport {\n  storage,\n  readFile,\n  checkProcessById,\n  cmd,\n  checkFileExist,\n  delay,\n  isWin,\n} from '../../../utils';\n\nexport default {\n  getCode(code) {\n    const { nginx, conf } = this.getState();\n    // nginx -c conf -s signal -p prefix\n    return `\"${nginx}\" -c \"${conf}\"${code}${isWin ? ` -p \"${path.dirname(nginx)}\"` : ''}`;\n  },\n  async checkExist() {\n    const { nginx, conf } = this.getState();\n    await checkFileExist(nginx, 'nginx文件不存在');\n    await checkFileExist(conf, 'conf文件不存在');\n  },\n  // 执行命令\n  async cmd(code, msg) {\n    await this.checkExist();\n    await cmd(this.getCode(code), msg);\n  },\n  // 启动nginx\n  async $start() {\n    // windows 启动命令不会退出，所以不会执行Promise回调\n    if (isWin) {\n      await this.checkExist();\n      cmd(this.getCode(''));\n    } else {\n      await this.cmd('', '启动失败');\n    }\n    await delay();\n    this.updateState({ started: true });\n  },\n  // 停止nginx\n  async $stop() {\n    await this.cmd(` -s stop`, '停止失败');\n    await delay();\n    this.updateState({ started: false });\n  },\n  // 重启nginx\n  async $reload() {\n    await delay();\n    await this.cmd(` -s reload`, '重启失败');\n  },\n  // 删除nginx\n  async $delete() {\n    const { started } = this.getState();\n    if (started) {\n      await this.$stop();\n    }\n    storage('nginx', '');\n    router.replace('/');\n  },\n  // 根据pid检测nginx是否已经启动\n  async $checkStart() {\n    const nginx = storage('nginx');\n    const state = nginx ? JSON.parse(nginx) : this.state;\n    try {\n      await delay(100);\n      const id = await readFile(state.pid);\n      await checkProcessById(id);\n      this.updateState({ ...state, started: true });\n    } catch (e) {\n      this.updateState(state);\n    }\n  },\n};\n","import React from 'react';\nimport { Router, Route } from 'nuomi';\nimport { ConfigProvider } from 'antd';\nimport zhCN from 'antd/es/locale/zh_CN';\nimport index from './pages/index';\nimport nginx from './pages/nginx';\nimport './assets/style.scss';\n\nconst App = () => {\n  return (\n    <ConfigProvider locale={zhCN}>\n      <Router>\n        <Route path=\"/\" {...index} />\n        <Route path=\"/nginx\" cache {...nginx} />\n      </Router>\n    </ConfigProvider>\n  );\n};\n\nexport default App;\n","import { message } from 'antd';\nimport { nuomi, router } from 'nuomi';\n\nnuomi.config({\n  effects: {\n    updateState(payload) {\n      this.dispatch({\n        type: '_updateState',\n        payload,\n      });\n    },\n  },\n});\n\nmessage.config({\n  duration: 2,\n  maxCount: 3,\n});\n\nrouter.listener(() => {\n  message.destroy();\n});\n\nwindow.addEventListener('keydown', (e) => {\n  if (e.ctrlKey && e.keyCode === 116) {\n    window.location.reload();\n  }\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './config';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","module.exports = require(\"fs\");"],"sourceRoot":""}